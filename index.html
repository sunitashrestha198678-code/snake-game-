<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Snake Game</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      font-family: 'Arial', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      background-color: #f7f7f7;
    }

    canvas {
      border: 3px solid #333;
      background-color: #fefefe;
    }
  </style>
</head>
<body>

  <canvas id="gameCanvas" width="400" height="400"></canvas>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const gridSize = 20;
    const gameSpeed = 200; // slower speed (ms per frame)

    let snake = [];
    let direction;
    let food;
    let score = 0;
    let gameInterval;
    let gameRunning = false;

    // --- Draw centered Start button on canvas ---
    function drawStartScreen() {
      ctx.fillStyle = "#f7f7f7";
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = "#198754";
      ctx.fillRect(150, 180, 100, 40);

      ctx.fillStyle = "white";
      ctx.font = "16px Arial";
      ctx.textAlign = "center";
      ctx.fillText("Start Game", canvas.width / 2, 205);

      ctx.fillStyle = "#333";
      ctx.font = "bold 24px Arial";
      ctx.fillText("🐍 Snake Game 🐍", canvas.width / 2, 100);
      ctx.font = "16px Arial";
      ctx.fillText("Click the green button to start", canvas.width / 2, 140);
    }

    // --- Initialize snake and food ---
    function initGame() {
      snake = [{ x: 8 * gridSize, y: 8 * gridSize }];
      direction = { x: 1, y: 0 };
      food = generateFood();
      score = 0;
      gameRunning = true;
      gameInterval = setInterval(gameLoop, gameSpeed);
    }

    // --- Generate random food position ---
    function generateFood() {
      const x = Math.floor(Math.random() * (canvas.width / gridSize)) * gridSize;
      const y = Math.floor(Math.random() * (canvas.height / gridSize)) * gridSize;
      return { x, y };
    }

    // --- Draw the snake ---
    function drawSnake() {
      ctx.fillStyle = "#28a745";
      snake.forEach(segment => ctx.fillRect(segment.x, segment.y, gridSize, gridSize));
    }

    // --- Draw food ---
    function drawFood() {
      ctx.fillStyle = "#dc3545";
      ctx.fillRect(food.x, food.y, gridSize, gridSize);
    }

    // --- Update snake position ---
    function updateSnake() {
      const head = { x: snake[0].x + direction.x * gridSize, y: snake[0].y + direction.y * gridSize };
      snake.unshift(head);

      if (head.x === food.x && head.y === food.y) {
        score += 10;
        food = generateFood();
      } else {
        snake.pop();
      }
    }

    // --- Check for collisions ---
    function checkCollision() {
      const head = snake[0];
      // Wall collision
      if (head.x < 0 || head.x >= canvas.width || head.y < 0 || head.y >= canvas.height) return true;
      // Self collision
      for (let i = 1; i < snake.length; i++) {
        if (head.x === snake[i].x && head.y === snake[i].y) return true;
      }
      return false;
    }

    // --- Draw score ---
    function drawScore() {
      ctx.fillStyle = "#333";
      ctx.font = "16px Arial";
      ctx.textAlign = "left";
      ctx.fillText("Score: " + score, 10, 20);
    }

    // --- Game loop ---
    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      updateSnake();
      drawSnake();
      drawFood();
      drawScore();

      if (checkCollision()) {
        clearInterval(gameInterval);
        gameRunning = false;
        drawGameOver();
      }
    }

    // --- Draw Game Over Screen ---
    function drawGameOver() {
      ctx.fillStyle = "rgba(0, 0, 0, 0.6)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = "#fff";
      ctx.font = "24px Arial";
      ctx.textAlign = "center";
      ctx.fillText("💀 Game Over!", canvas.width / 2, canvas.height / 2 - 20);
      ctx.font = "16px Arial";
      ctx.fillText("Score: " + score, canvas.width / 2, canvas.height / 2 + 10);
      ctx.fillText("Click to Restart", canvas.width / 2, canvas.height / 2 + 40);
    }

    // --- Control snake direction ---
    document.addEventListener("keydown", e => {
      if (!gameRunning) return;
      switch (e.key) {
        case "ArrowUp": if (direction.y === 0) direction = { x: 0, y: -1 }; break;
        case "ArrowDown": if (direction.y === 0) direction = { x: 0, y: 1 }; break;
        case "ArrowLeft": if (direction.x === 0) direction = { x: -1, y: 0 }; break;
        case "ArrowRight": if (direction.x === 0) direction = { x: 1, y: 0 }; break;
      }
    });

    // --- Canvas click handler ---
    canvas.addEventListener("click", e => {
      const rect = canvas.getBoundingClientRect();
      const mouseX = e.clientX - rect.left;
      const mouseY = e.clientY - rect.top;

      if (!gameRunning) {
        // Check if user clicked on "Start Game" button
        if (
          mouseX >= 150 && mouseX <= 250 &&
          mouseY >= 180 && mouseY <= 220
        ) {
          initGame();
        } else {
          // Restart if game over
          initGame();
        }
      }
    });

    // Show start screen initially
    drawStartScreen();
  </script>

</body>
</html>
